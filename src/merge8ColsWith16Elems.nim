func merge8ColumnsWith16Elements( bufPtr :pointer ) =

  var vecs = cast[ptr UncheckedArray[M256i]]( bufPtr )

  vecs[ 8] = mm256_shuffle_epi32( vecs[ 8], Mask2301 );  COEX( vecs[ 7], vecs[ 8] )
  vecs[ 9] = mm256_shuffle_epi32( vecs[ 9], Mask2301 );  COEX( vecs[ 6], vecs[ 9] )
  vecs[10] = mm256_shuffle_epi32( vecs[10], Mask2301 );  COEX( vecs[ 5], vecs[10] )
  vecs[11] = mm256_shuffle_epi32( vecs[11], Mask2301 );  COEX( vecs[ 4], vecs[11] )
  vecs[12] = mm256_shuffle_epi32( vecs[12], Mask2301 );  COEX( vecs[ 3], vecs[12] )
  vecs[13] = mm256_shuffle_epi32( vecs[13], Mask2301 );  COEX( vecs[ 2], vecs[13] )
  vecs[14] = mm256_shuffle_epi32( vecs[14], Mask2301 );  COEX( vecs[ 1], vecs[14] )
  vecs[15] = mm256_shuffle_epi32( vecs[15], Mask2301 );  COEX( vecs[ 0], vecs[15] )
  vecs[ 4] = mm256_shuffle_epi32( vecs[ 4], Mask2301 );  COEX( vecs[ 3], vecs[ 4] )
  vecs[ 5] = mm256_shuffle_epi32( vecs[ 5], Mask2301 );  COEX( vecs[ 2], vecs[ 5] )
  vecs[ 6] = mm256_shuffle_epi32( vecs[ 6], Mask2301 );  COEX( vecs[ 1], vecs[ 6] )
  vecs[ 7] = mm256_shuffle_epi32( vecs[ 7], Mask2301 );  COEX( vecs[ 0], vecs[ 7] )
  vecs[12] = mm256_shuffle_epi32( vecs[12], Mask2301 );  COEX( vecs[11], vecs[12] )
  vecs[13] = mm256_shuffle_epi32( vecs[13], Mask2301 );  COEX( vecs[10], vecs[13] )
  vecs[14] = mm256_shuffle_epi32( vecs[14], Mask2301 );  COEX( vecs[ 9], vecs[14] )
  vecs[15] = mm256_shuffle_epi32( vecs[15], Mask2301 );  COEX( vecs[ 8], vecs[15] )
  vecs[ 2] = mm256_shuffle_epi32( vecs[ 2], Mask2301 );  COEX( vecs[ 1], vecs[ 2] )
  vecs[ 3] = mm256_shuffle_epi32( vecs[ 3], Mask2301 );  COEX( vecs[ 0], vecs[ 3] )
  vecs[ 6] = mm256_shuffle_epi32( vecs[ 6], Mask2301 );  COEX( vecs[ 5], vecs[ 6] )
  vecs[ 7] = mm256_shuffle_epi32( vecs[ 7], Mask2301 );  COEX( vecs[ 4], vecs[ 7] )
  vecs[10] = mm256_shuffle_epi32( vecs[10], Mask2301 );  COEX( vecs[ 9], vecs[10] )
  vecs[11] = mm256_shuffle_epi32( vecs[11], Mask2301 );  COEX( vecs[ 8], vecs[11] )
  vecs[14] = mm256_shuffle_epi32( vecs[14], Mask2301 );  COEX( vecs[13], vecs[14] )
  vecs[15] = mm256_shuffle_epi32( vecs[15], Mask2301 );  COEX( vecs[12], vecs[15] )
  vecs[ 1] = mm256_shuffle_epi32( vecs[ 1], Mask2301 );  COEX( vecs[ 0], vecs[ 1] )
  vecs[ 3] = mm256_shuffle_epi32( vecs[ 3], Mask2301 );  COEX( vecs[ 2], vecs[ 3] )
  vecs[ 5] = mm256_shuffle_epi32( vecs[ 5], Mask2301 );  COEX( vecs[ 4], vecs[ 5] )
  vecs[ 7] = mm256_shuffle_epi32( vecs[ 7], Mask2301 );  COEX( vecs[ 6], vecs[ 7] )
  vecs[ 9] = mm256_shuffle_epi32( vecs[ 9], Mask2301 );  COEX( vecs[ 8], vecs[ 9] )
  vecs[11] = mm256_shuffle_epi32( vecs[11], Mask2301 );  COEX( vecs[10], vecs[11] )
  vecs[13] = mm256_shuffle_epi32( vecs[13], Mask2301 );  COEX( vecs[12], vecs[13] )
  vecs[15] = mm256_shuffle_epi32( vecs[15], Mask2301 );  COEX( vecs[14], vecs[15] )
  COEXshuffle( vecs[ 0], 1, 0, 3, 2, 5, 4, 7, 6 );  COEXshuffle( vecs[ 1], 1, 0, 3, 2, 5, 4, 7, 6 )
  COEXshuffle( vecs[ 2], 1, 0, 3, 2, 5, 4, 7, 6 );  COEXshuffle( vecs[ 3], 1, 0, 3, 2, 5, 4, 7, 6 )
  COEXshuffle( vecs[ 4], 1, 0, 3, 2, 5, 4, 7, 6 );  COEXshuffle( vecs[ 5], 1, 0, 3, 2, 5, 4, 7, 6 )
  COEXshuffle( vecs[ 6], 1, 0, 3, 2, 5, 4, 7, 6 );  COEXshuffle( vecs[ 7], 1, 0, 3, 2, 5, 4, 7, 6 )
  COEXshuffle( vecs[ 8], 1, 0, 3, 2, 5, 4, 7, 6 );  COEXshuffle( vecs[ 9], 1, 0, 3, 2, 5, 4, 7, 6 )
  COEXshuffle( vecs[10], 1, 0, 3, 2, 5, 4, 7, 6 );  COEXshuffle( vecs[11], 1, 0, 3, 2, 5, 4, 7, 6 )
  COEXshuffle( vecs[12], 1, 0, 3, 2, 5, 4, 7, 6 );  COEXshuffle( vecs[13], 1, 0, 3, 2, 5, 4, 7, 6 )
  COEXshuffle( vecs[14], 1, 0, 3, 2, 5, 4, 7, 6 );  COEXshuffle( vecs[15], 1, 0, 3, 2, 5, 4, 7, 6 )
  vecs[ 8] = mm256_shuffle_epi32( vecs[ 8], Mask0123 );  COEX( vecs[ 7], vecs[ 8] )
  vecs[ 9] = mm256_shuffle_epi32( vecs[ 9], Mask0123 );  COEX( vecs[ 6], vecs[ 9] )
  vecs[10] = mm256_shuffle_epi32( vecs[10], Mask0123 );  COEX( vecs[ 5], vecs[10] )
  vecs[11] = mm256_shuffle_epi32( vecs[11], Mask0123 );  COEX( vecs[ 4], vecs[11] )
  vecs[12] = mm256_shuffle_epi32( vecs[12], Mask0123 );  COEX( vecs[ 3], vecs[12] )
  vecs[13] = mm256_shuffle_epi32( vecs[13], Mask0123 );  COEX( vecs[ 2], vecs[13] )
  vecs[14] = mm256_shuffle_epi32( vecs[14], Mask0123 );  COEX( vecs[ 1], vecs[14] )
  vecs[15] = mm256_shuffle_epi32( vecs[15], Mask0123 );  COEX( vecs[ 0], vecs[15] )
  vecs[ 4] = mm256_shuffle_epi32( vecs[ 4], Mask0123 );  COEX( vecs[ 3], vecs[ 4] )
  vecs[ 5] = mm256_shuffle_epi32( vecs[ 5], Mask0123 );  COEX( vecs[ 2], vecs[ 5] )
  vecs[ 6] = mm256_shuffle_epi32( vecs[ 6], Mask0123 );  COEX( vecs[ 1], vecs[ 6] )
  vecs[ 7] = mm256_shuffle_epi32( vecs[ 7], Mask0123 );  COEX( vecs[ 0], vecs[ 7] )
  vecs[12] = mm256_shuffle_epi32( vecs[12], Mask0123 );  COEX( vecs[11], vecs[12] )
  vecs[13] = mm256_shuffle_epi32( vecs[13], Mask0123 );  COEX( vecs[10], vecs[13] )
  vecs[14] = mm256_shuffle_epi32( vecs[14], Mask0123 );  COEX( vecs[ 9], vecs[14] )
  vecs[15] = mm256_shuffle_epi32( vecs[15], Mask0123 );  COEX( vecs[ 8], vecs[15] )
  vecs[ 2] = mm256_shuffle_epi32( vecs[ 2], Mask0123 );  COEX( vecs[ 1], vecs[ 2] )
  vecs[ 3] = mm256_shuffle_epi32( vecs[ 3], Mask0123 );  COEX( vecs[ 0], vecs[ 3] )
  vecs[ 6] = mm256_shuffle_epi32( vecs[ 6], Mask0123 );  COEX( vecs[ 5], vecs[ 6] )
  vecs[ 7] = mm256_shuffle_epi32( vecs[ 7], Mask0123 );  COEX( vecs[ 4], vecs[ 7] )
  vecs[10] = mm256_shuffle_epi32( vecs[10], Mask0123 );  COEX( vecs[ 9], vecs[10] )
  vecs[11] = mm256_shuffle_epi32( vecs[11], Mask0123 );  COEX( vecs[ 8], vecs[11] )
  vecs[14] = mm256_shuffle_epi32( vecs[14], Mask0123 );  COEX( vecs[13], vecs[14] )
  vecs[15] = mm256_shuffle_epi32( vecs[15], Mask0123 );  COEX( vecs[12], vecs[15] )
  vecs[ 1] = mm256_shuffle_epi32( vecs[ 1], Mask0123 );  COEX( vecs[ 0], vecs[ 1] )
  vecs[ 3] = mm256_shuffle_epi32( vecs[ 3], Mask0123 );  COEX( vecs[ 2], vecs[ 3] )
  vecs[ 5] = mm256_shuffle_epi32( vecs[ 5], Mask0123 );  COEX( vecs[ 4], vecs[ 5] )
  vecs[ 7] = mm256_shuffle_epi32( vecs[ 7], Mask0123 );  COEX( vecs[ 6], vecs[ 7] )
  vecs[ 9] = mm256_shuffle_epi32( vecs[ 9], Mask0123 );  COEX( vecs[ 8], vecs[ 9] )
  vecs[11] = mm256_shuffle_epi32( vecs[11], Mask0123 );  COEX( vecs[10], vecs[11] )
  vecs[13] = mm256_shuffle_epi32( vecs[13], Mask0123 );  COEX( vecs[12], vecs[13] )
  vecs[15] = mm256_shuffle_epi32( vecs[15], Mask0123 );  COEX( vecs[14], vecs[15] )
  COEXshuffle( vecs[ 0], 3, 2, 1, 0, 7, 6, 5, 4 );  COEXshuffle( vecs[ 0], 1, 0, 3, 2, 5, 4, 7, 6 )
  COEXshuffle( vecs[ 1], 3, 2, 1, 0, 7, 6, 5, 4 );  COEXshuffle( vecs[ 1], 1, 0, 3, 2, 5, 4, 7, 6 )
  COEXshuffle( vecs[ 2], 3, 2, 1, 0, 7, 6, 5, 4 );  COEXshuffle( vecs[ 2], 1, 0, 3, 2, 5, 4, 7, 6 )
  COEXshuffle( vecs[ 3], 3, 2, 1, 0, 7, 6, 5, 4 );  COEXshuffle( vecs[ 3], 1, 0, 3, 2, 5, 4, 7, 6 )
  COEXshuffle( vecs[ 4], 3, 2, 1, 0, 7, 6, 5, 4 );  COEXshuffle( vecs[ 4], 1, 0, 3, 2, 5, 4, 7, 6 )
  COEXshuffle( vecs[ 5], 3, 2, 1, 0, 7, 6, 5, 4 );  COEXshuffle( vecs[ 5], 1, 0, 3, 2, 5, 4, 7, 6 )
  COEXshuffle( vecs[ 6], 3, 2, 1, 0, 7, 6, 5, 4 );  COEXshuffle( vecs[ 6], 1, 0, 3, 2, 5, 4, 7, 6 )
  COEXshuffle( vecs[ 7], 3, 2, 1, 0, 7, 6, 5, 4 );  COEXshuffle( vecs[ 7], 1, 0, 3, 2, 5, 4, 7, 6 )
  COEXshuffle( vecs[ 8], 3, 2, 1, 0, 7, 6, 5, 4 );  COEXshuffle( vecs[ 8], 1, 0, 3, 2, 5, 4, 7, 6 )
  COEXshuffle( vecs[ 9], 3, 2, 1, 0, 7, 6, 5, 4 );  COEXshuffle( vecs[ 9], 1, 0, 3, 2, 5, 4, 7, 6 )
  COEXshuffle( vecs[10], 3, 2, 1, 0, 7, 6, 5, 4 );  COEXshuffle( vecs[10], 1, 0, 3, 2, 5, 4, 7, 6 )
  COEXshuffle( vecs[11], 3, 2, 1, 0, 7, 6, 5, 4 );  COEXshuffle( vecs[11], 1, 0, 3, 2, 5, 4, 7, 6 )
  COEXshuffle( vecs[12], 3, 2, 1, 0, 7, 6, 5, 4 );  COEXshuffle( vecs[12], 1, 0, 3, 2, 5, 4, 7, 6 )
  COEXshuffle( vecs[13], 3, 2, 1, 0, 7, 6, 5, 4 );  COEXshuffle( vecs[13], 1, 0, 3, 2, 5, 4, 7, 6 )
  COEXshuffle( vecs[14], 3, 2, 1, 0, 7, 6, 5, 4 );  COEXshuffle( vecs[14], 1, 0, 3, 2, 5, 4, 7, 6 )
  COEXshuffle( vecs[15], 3, 2, 1, 0, 7, 6, 5, 4 );  COEXshuffle( vecs[15], 1, 0, 3, 2, 5, 4, 7, 6 )
  reverse( vecs[ 8] ); COEX( vecs[ 7], vecs[ 8] );  reverse( vecs[ 9] ); COEX( vecs[ 6], vecs[ 9] )
  reverse( vecs[10] ); COEX( vecs[ 5], vecs[10] );  reverse( vecs[11] ); COEX( vecs[ 4], vecs[11] )
  reverse( vecs[12] ); COEX( vecs[ 3], vecs[12] );  reverse( vecs[13] ); COEX( vecs[ 2], vecs[13] )
  reverse( vecs[14] ); COEX( vecs[ 1], vecs[14] );  reverse( vecs[15] ); COEX( vecs[ 0], vecs[15] )
  reverse( vecs[ 4] ); COEX( vecs[ 3], vecs[ 4] );  reverse( vecs[ 5] ); COEX( vecs[ 2], vecs[ 5] )
  reverse( vecs[ 6] ); COEX( vecs[ 1], vecs[ 6] );  reverse( vecs[ 7] ); COEX( vecs[ 0], vecs[ 7] )
  reverse( vecs[12] ); COEX( vecs[11], vecs[12] );  reverse( vecs[13] ); COEX( vecs[10], vecs[13] )
  reverse( vecs[14] ); COEX( vecs[ 9], vecs[14] );  reverse( vecs[15] ); COEX( vecs[ 8], vecs[15] )
  reverse( vecs[ 2] ); COEX( vecs[ 1], vecs[ 2] );  reverse( vecs[ 3] ); COEX( vecs[ 0], vecs[ 3] )
  reverse( vecs[ 6] ); COEX( vecs[ 5], vecs[ 6] );  reverse( vecs[ 7] ); COEX( vecs[ 4], vecs[ 7] )
  reverse( vecs[10] ); COEX( vecs[ 9], vecs[10] );  reverse( vecs[11] ); COEX( vecs[ 8], vecs[11] )
  reverse( vecs[14] ); COEX( vecs[13], vecs[14] );  reverse( vecs[15] ); COEX( vecs[12], vecs[15] )
  reverse( vecs[ 1] ); COEX( vecs[ 0], vecs[ 1] );  reverse( vecs[ 3] ); COEX( vecs[ 2], vecs[ 3] )
  reverse( vecs[ 5] ); COEX( vecs[ 4], vecs[ 5] );  reverse( vecs[ 7] ); COEX( vecs[ 6], vecs[ 7] )
  reverse( vecs[ 9] ); COEX( vecs[ 8], vecs[ 9] );  reverse( vecs[11] ); COEX( vecs[10], vecs[11] )
  reverse( vecs[13] ); COEX( vecs[12], vecs[13] );  reverse( vecs[15] ); COEX( vecs[14], vecs[15] )
  COEXpermute( vecs[ 0], 7, 6, 5, 4, 3, 2, 1, 0 );  COEXshuffle( vecs[ 0], 2, 3, 0, 1, 6, 7, 4, 5 )
  COEXshuffle( vecs[ 0], 1, 0, 3, 2, 5, 4, 7, 6 );  COEXpermute( vecs[ 1], 7, 6, 5, 4, 3, 2, 1, 0 )
  COEXshuffle( vecs[ 1], 2, 3, 0, 1, 6, 7, 4, 5 );  COEXshuffle( vecs[ 1], 1, 0, 3, 2, 5, 4, 7, 6 )
  COEXpermute( vecs[ 2], 7, 6, 5, 4, 3, 2, 1, 0 );  COEXshuffle( vecs[ 2], 2, 3, 0, 1, 6, 7, 4, 5 )
  COEXshuffle( vecs[ 2], 1, 0, 3, 2, 5, 4, 7, 6 );  COEXpermute( vecs[ 3], 7, 6, 5, 4, 3, 2, 1, 0 )
  COEXshuffle( vecs[ 3], 2, 3, 0, 1, 6, 7, 4, 5 );  COEXshuffle( vecs[ 3], 1, 0, 3, 2, 5, 4, 7, 6 )
  COEXpermute( vecs[ 4], 7, 6, 5, 4, 3, 2, 1, 0 );  COEXshuffle( vecs[ 4], 2, 3, 0, 1, 6, 7, 4, 5 )
  COEXshuffle( vecs[ 4], 1, 0, 3, 2, 5, 4, 7, 6 );  COEXpermute( vecs[ 5], 7, 6, 5, 4, 3, 2, 1, 0 )
  COEXshuffle( vecs[ 5], 2, 3, 0, 1, 6, 7, 4, 5 );  COEXshuffle( vecs[ 5], 1, 0, 3, 2, 5, 4, 7, 6 )
  COEXpermute( vecs[ 6], 7, 6, 5, 4, 3, 2, 1, 0 );  COEXshuffle( vecs[ 6], 2, 3, 0, 1, 6, 7, 4, 5 )
  COEXshuffle( vecs[ 6], 1, 0, 3, 2, 5, 4, 7, 6 );  COEXpermute( vecs[ 7], 7, 6, 5, 4, 3, 2, 1, 0 )
  COEXshuffle( vecs[ 7], 2, 3, 0, 1, 6, 7, 4, 5 );  COEXshuffle( vecs[ 7], 1, 0, 3, 2, 5, 4, 7, 6 )
  COEXpermute( vecs[ 8], 7, 6, 5, 4, 3, 2, 1, 0 );  COEXshuffle( vecs[ 8], 2, 3, 0, 1, 6, 7, 4, 5 )
  COEXshuffle( vecs[ 8], 1, 0, 3, 2, 5, 4, 7, 6 );  COEXpermute( vecs[ 9], 7, 6, 5, 4, 3, 2, 1, 0 )
  COEXshuffle( vecs[ 9], 2, 3, 0, 1, 6, 7, 4, 5 );  COEXshuffle( vecs[ 9], 1, 0, 3, 2, 5, 4, 7, 6 )
  COEXpermute( vecs[10], 7, 6, 5, 4, 3, 2, 1, 0 );  COEXshuffle( vecs[10], 2, 3, 0, 1, 6, 7, 4, 5 )
  COEXshuffle( vecs[10], 1, 0, 3, 2, 5, 4, 7, 6 );  COEXpermute( vecs[11], 7, 6, 5, 4, 3, 2, 1, 0 )
  COEXshuffle( vecs[11], 2, 3, 0, 1, 6, 7, 4, 5 );  COEXshuffle( vecs[11], 1, 0, 3, 2, 5, 4, 7, 6 )
  COEXpermute( vecs[12], 7, 6, 5, 4, 3, 2, 1, 0 );  COEXshuffle( vecs[12], 2, 3, 0, 1, 6, 7, 4, 5 )
  COEXshuffle( vecs[12], 1, 0, 3, 2, 5, 4, 7, 6 );  COEXpermute( vecs[13], 7, 6, 5, 4, 3, 2, 1, 0 )
  COEXshuffle( vecs[13], 2, 3, 0, 1, 6, 7, 4, 5 );  COEXshuffle( vecs[13], 1, 0, 3, 2, 5, 4, 7, 6 )
  COEXpermute( vecs[14], 7, 6, 5, 4, 3, 2, 1, 0 );  COEXshuffle( vecs[14], 2, 3, 0, 1, 6, 7, 4, 5 )
  COEXshuffle( vecs[14], 1, 0, 3, 2, 5, 4, 7, 6 );  COEXpermute( vecs[15], 7, 6, 5, 4, 3, 2, 1, 0 )
  COEXshuffle( vecs[15], 2, 3, 0, 1, 6, 7, 4, 5 );  COEXshuffle( vecs[15], 1, 0, 3, 2, 5, 4, 7, 6 )
